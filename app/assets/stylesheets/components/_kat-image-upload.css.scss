// KAT FILE UPLOAD

// dropzone for images/files
.file-upload--dropzone {
  @include pie-clearfix;
  border: 2px dashed #bbb;
  padding: $small-unit;
  margin-top: $default-unit;

  a {
    color: #bada55;
  }

  &.file-upload--dropzone--over {
    border-color: #bada55;
  }
}

.file-upload--thumbnail {
  float: left;
  width: 200px;
  height: 200px;
  background: #444;
  margin-right: 10px;

  .file-upload--image {
    margin-top: 0;
    max-height: 100%;
  }

  .file-upload--dropzone--over & {
    opacity: 0.8;
  }
}

.file-upload--image {
  .file-upload--dropzone--over & {
    opacity: 0.8;
  }
}

// each image (single or gallery) gets a thumbnail-container
.thumbnail-container {
  display: block;
  position: relative;

  .thumb {
    position: relative;
  }

  .thumb .file {
    text-align: center;
    background: #ccc url("/assets/file-upload/icon_unknown.png") 50% 20px no-repeat;
    padding: 156px 10px 10px;

    &.file__doc { background-image: url("/assets/file-upload/icon_doc.png"); }
    &.file__docx { background-image: url("/assets/file-upload/icon_docx.png"); }
    &.file__mp3 { background-image: url("/assets/file-upload/icon_mp3.png"); }
    &.file__pdf { background-image: url("/assets/file-upload/icon_pdf.png"); }
    &.file__csv { background-image: url("/assets/file-upload/icon_csv.png"); }
    &.file__xls { background-image: url("/assets/file-upload/icon_xls.png"); }
  }

  .thumb img,
  .thumb .file {
    display: block;
    position: relative;
    z-index: 2;
  }

  .thumbnail--remove {
    position: absolute;
    top: 0;
    right: 0;
    z-index: 2;
    background: red;
    color: #fff;
    padding: 2px 8px;
    cursor: pointer;
    display: none;
  }

  &:hover .thumbnail--remove {
    display: block;
  }

  progress {
    display: none;
    position: absolute;
    top: 50%;
    left: 50%;
    z-index: 5;
    @include transform(translate(-50%, -50%));
  }

  &.uploading progress {
    display: block;
  }

  &.uploading .thumb {
    @include opacity(0.2);
  }
}

// helper text
.file-upload--text {
  float: left;
  padding-left: $default-unit;
}

.file-upload--message {
  font-size: 1.1em;
  padding: 15px;
  text-align: center;
}

// Thumbnail container and undo styles
.file-upload--undo,
.thumbnail-container {
  float: left;
  width: 200px;
  height: 200px;
  background: #444;
  margin-right: 10px;
  position: relative;

  .thumb {
    width: 100%;
    height: 100%;
    position: relative;
  }

  img {
    max-width: 100%;
    max-height: 100%;
  }

  img,
  span {
    @include transform(translate(-50%,-50%));
    position: absolute;
    top: 50%;
    left: 50%;
  }

}

.file-upload--undo {
  background: #ccc;
  color: #222;
  cursor: pointer;
}

// gallery zone
.file-upload--gallery {
  @include pie-clearfix;
  margin: $default-unit 0;

  .thumb:hover,
  .thumb:hover img,
  .thumb:hover .file {
    cursor: move;
  }

  .dragging {
    border: 2px dashed #000;
    background: #ccc;

    .thumb {
      opacity: 0;
    }
  }

  .dragover {
    opacity: 0.2;
  }
}

// custom css for custom class version
.dropzone_file-upload-with-callback {
  .thumbnail-container {
    @include pie-clearfix;
    background: transparent;
    float: none;
    width: 100%;
  }
  .thumb {
    float: left;
    width: 33%;
  }
  .file-upload-with-callback--fields {
    float: left;
    width: 66%;
    padding-left: $default-unit;
  }
}